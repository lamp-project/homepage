(window.webpackJsonp=window.webpackJsonp||[]).push([[16,5,6,7,8,9,10],{572:function(t,e,n){var content=n(583);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("75c2cb0a",content,!0,{sourceMap:!1})},573:function(t,e,n){var content=n(585);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("01885c30",content,!0,{sourceMap:!1})},574:function(t,e,n){var content=n(589);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("112d43d7",content,!0,{sourceMap:!1})},575:function(t,e,n){var content=n(591);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("907cade8",content,!0,{sourceMap:!1})},576:function(t,e,n){var content=n(595);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("6c6ea87a",content,!0,{sourceMap:!1})},578:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));n(300);var r=n(52),o=n(57),c=n(58),l=n(304),d=n(156),f=n(234),v=n(112),h=(n(13),n(18),n(109),n(236)),m=n.n(h),x=n(215),w=n(403);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(v.a)(t);if(e){var o=Object(v.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var y=function(t){Object(d.a)(f,t);var e,n=M(f);function f(t,e){var r;return Object(o.a)(this,f),(r=n.call(this,t)).userWords=e,r.locationsForge=m.a.createInstance({name:"locations"}),localStorage.getItem("font-size")||localStorage.setItem("font-size","24"),r}return Object(c.a)(f,[{key:"initialize",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.a)(Object(v.a)(f.prototype),"initialize",this).call(this);case 2:return e=this.book.key(),t.next=5,this.locationsForge.getItem(e);case 5:if(!(n=t.sent)){t.next=10;break}this.book.locations.load(n),t.next=15;break;case 10:return t.next=12,this.book.locations.generate(10);case 12:return r=t.sent,t.next=15,this.locationsForge.setItem(e,r);case 15:this.on("content",this.registerEventListenersOfHighlights.bind(this)),this.book.spine.hooks.content.register(this.hightlight.bind(this));case 17:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"hightlight",value:function(t){var e=this,body=t.body;this.emit("processing:start"),body.querySelectorAll("vocab").forEach((function(t){var n=t.textContent.toLowerCase();switch(e.userWords[n]){case w.UserWordStatus.KNOWN:case w.UserWordStatus.LEARNING:t.className=e.userWords[n];break;default:t.className=w.UserWordStatus.UNKNOWN}})),this.emit("processing:end")}},{key:"registerEventListenersOfHighlights",value:function(t){var e=this;t.body.querySelectorAll("vocab").forEach((function(element){element.onclick=function(t){e.emit("word-click",element),t.stopPropagation()}}))}},{key:"highlightTextNode",value:function(t){}},{key:"registerThemes",value:function(){this.rendition.themes.register("lamp-reader",{"*":{"font-size":"".concat(localStorage.getItem("font-size"),"px !important")},body:{color:"black","padding-top":"0 !important","padding-bottom":"0 !important","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},vocab:{cursor:"pointer","border-radius":"5px"},"vocab.KNOWN":{"background-color":"lightgrey"},"vocab.LEARNING":{"background-color":"orange"},"vocab.UNKNOWN":{"background-color":"black",color:"white"},"a:hover":{color:"unset"}}),this.rendition.themes.select("lamp-reader")}},{key:"fontSize",set:function(t){this.rendition.themes.default({"*":{"font-size":"".concat(t,"px !important")}}),localStorage.setItem("font-size",t)}}],[{key:"updateWordStatus",value:function(t,e){t.getRootNode().querySelectorAll('vocab[word="'.concat(e.word.word,'"]')).forEach((function(t){return t.className=e.status}))}}]),f}(x.StatefulEpubViewer)},581:function(t,e,n){"use strict";n.r(e);var r=n(25),o=n(142),c=r.default.extend({components:{BModal:o.a},data:function(){return{fontSize:localStorage.getItem("font-size")||"24",fontSizeOptions:[{value:"18",text:"Small"},{value:"24",text:"Medium"},{value:"32",text:"Large"}]}},watch:{fontSize:function(t){this.$emit("font-size-changed",t)}}}),l=n(86),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{id:"styles-modal",size:"sm",title:"View Styles",centered:""}},[n("h6",[t._v("Font Size:")]),t._v(" "),n("b-form-select",{attrs:{options:t.fontSizeOptions},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}})],1)}),[],!1,null,null,null);e.default=component.exports},582:function(t,e,n){"use strict";n(572)},583:function(t,e,n){var r=n(116)(!1);r.push([t.i,".loading[data-v-66a59df0]{display:flex;align-items:center;justify-content:center;width:100vw;height:100vh}.loading img[data-v-66a59df0]{height:75vh;filter:grayscale(100%)}",""]),t.exports=r},584:function(t,e,n){"use strict";n(573)},585:function(t,e,n){var r=n(116)(!1);r.push([t.i,".chapter-bar[data-v-79732f3c]{justify-content:center}",""]),t.exports=r},586:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9Ii03OC41IDAgNTEyIDUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiA+PHRpdGxlPmxlZnQ8L3RpdGxlPjxwYXRoIGQ9Ik0yNTcgNjRMMjkxIDk4IDEyOCAyNjIgMjkxIDQyNiAyNTcgNDYwIDYxIDI2MiAyNTcgNjRaIiAvPjwvc3ZnPgo="},587:function(t,e,n){t.exports=n.p+"img/gear.b779e5c.svg"},588:function(t,e,n){"use strict";n(574)},589:function(t,e,n){var r=n(116)(!1);r.push([t.i,".top-bar[data-v-2104d1cd]{background-color:unset!important}",""]),t.exports=r},590:function(t,e,n){"use strict";n(575)},591:function(t,e,n){var r=n(116)(!1);r.push([t.i,".bottom-bar[data-v-81584fce]{background-color:unset!important}",""]),t.exports=r},592:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGNsYXNzPSJpY29uIj4KICA8cGF0aCBkPSJNODkyLjEgNzM3LjhsLTExMC4zLTYzLjdhMTUuOSAxNS45IDAgMCAwLTIxLjcgNS45bC0xOS45IDM0LjVjLTQuNCA3LjYtMS44IDE3LjQgNS44IDIxLjhMODU2LjMgODAwYTE1LjkgMTUuOSAwIDAgMCAyMS43LTUuOWwxOS45LTM0LjVjNC40LTcuNiAxLjctMTcuNC01LjgtMjEuOHpNNzYwIDM0NGExNS45IDE1LjkgMCAwIDAgMjEuNyA1LjlMODkyIDI4Ni4yYzcuNi00LjQgMTAuMi0xNC4yIDUuOC0yMS44TDg3OCAyMzBhMTUuOSAxNS45IDAgMCAwLTIxLjctNS45TDc0NiAyODcuOGExNS45OSAxNS45OSAwIDAgMC01LjggMjEuOEw3NjAgMzQ0em0xNzQgMTMySDgwNmMtOC44IDAtMTYgNy4yLTE2IDE2djQwYzAgOC44IDcuMiAxNiAxNiAxNmgxMjhjOC44IDAgMTYtNy4yIDE2LTE2di00MGMwLTguOC03LjItMTYtMTYtMTZ6TTYyNS45IDExNWMtNS45IDAtMTEuOSAxLjYtMTcuNCA1LjNMMjU0IDM1Mkg5MGMtOC44IDAtMTYgNy4yLTE2IDE2djI4OGMwIDguOCA3LjIgMTYgMTYgMTZoMTY0bDM1NC41IDIzMS43YzUuNSAzLjYgMTEuNiA1LjMgMTcuNCA1LjMgMTYuNyAwIDMyLjEtMTMuMyAzMi4xLTMyLjFWMTQ3LjFjMC0xOC44LTE1LjQtMzIuMS0zMi4xLTMyLjF6Ii8+Cjwvc3ZnPgo="},593:function(t,e){t.exports={lookup:async function(t){const e=`https://cdn.jsdelivr.net/gh/openderock/dictionary/${function(t){switch(t.length){case 1:return t;case 2:return`${t[0]}/${t[1]}`;default:return`${t[0]}/${t[1]}/${t[2]}`}}(t)}/${t}.json`;return fetch(e).then((t=>{if(t.ok)return t;throw new Error(t.statusText)})).then((t=>t.json()))}}},594:function(t,e,n){"use strict";n(576)},595:function(t,e,n){var r=n(116)(!1);r.push([t.i,"#word-modal .modal-title{text-transform:capitalize}#word-modal .modal-title small{font-size:50%}#word-modal .phonetic{cursor:pointer}#word-modal .translation{max-height:25vh;overflow-y:auto}#word-modal ul{padding-left:0}#word-modal li>b{text-transform:capitalize}",""]),t.exports=r},600:function(t,e,n){var content=n(616);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(117).default)("a1d8966e",content,!0,{sourceMap:!1})},604:function(t,e,n){"use strict";n.r(e);n(13),n(94),n(103),n(579),n(402);var r=n(25),img=n(97),o=n(155),c=r.default.extend({components:{BImg:img.a,BSpinner:o.a},props:{book:{type:Object,default:void 0}},methods:{createObjectURL:URL.createObjectURL}}),l=(n(582),n(86)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("center",{staticClass:"loading"},[n("div",[n("b-img",{attrs:{center:"",thumbnail:"",src:t.createObjectURL(t.book.cover),alt:"Center image"}}),t._v(" "),n("br"),t._v(" "),n("b-spinner",{attrs:{small:""}})],1),t._v(" "),n("br")])}),[],!1,null,"66a59df0",null);e.default=component.exports},605:function(t,e,n){"use strict";n.r(e);var r=n(25),o=n(198),c=n(200),l=n(205),d=r.default.extend({components:{BNavbar:o.a,BNavbarNav:c.a,BNavItem:l.a},props:{chapter:{type:String,default:""}}}),f=(n(584),n(86)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{staticClass:"chapter-bar",attrs:{fixed:"top"}},[n("b-navbar-nav",[n("b-nav-item",[n("small",[t._v(t._s(t.chapter))])])],1)],1)}),[],!1,null,"79732f3c",null);e.default=component.exports},606:function(t,e,n){"use strict";n.r(e);var r=n(25),o=n(198),c=n(200),l=n(205),d=r.default.extend({components:{BNavbar:o.a,BNavbarNav:c.a,BNavItem:l.a},props:{book:{type:Object,default:void 0}}}),f=(n(588),n(86)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-navbar",{staticClass:"top-bar",attrs:{variant:"light",fixed:"top"}},[r("b-navbar-nav",[r("b-nav-item",{attrs:{to:"/"}},[r("img",{staticClass:"icon faded",attrs:{src:n(586),alt:""}})])],1),t._v(" "),r("b-navbar-nav",{staticClass:"ml-auto"},[r("b-nav-item",{directives:[{name:"b-modal",rawName:"v-b-modal.styles-modal",modifiers:{"styles-modal":!0}}],attrs:{right:""}},[r("img",{staticClass:"icon faded",attrs:{src:n(587),alt:""}})])],1),t._v(" "),r("ReaderStylesModal",{on:{"font-size-changed":function(e){return t.$emit("font-size-changed",e)}}})],1)}),[],!1,null,"2104d1cd",null);e.default=component.exports;installComponents(component,{ReaderStylesModal:n(581).default})},607:function(t,e,n){"use strict";n.r(e);n(252);var r=n(25),o=n(198),c=n(200),l=n(205),d=r.default.extend({components:{BNavbar:o.a,BNavbarNav:c.a,BNavItem:l.a},props:{book:{type:Object,default:void 0}},computed:{leftPagesOfTheChapter:function(){var t,e=null===(t=this.book.pagination.currentLocation)||void 0===t?void 0:t.end.displayed;return e?e.total-e.page:-1},percentage:function(){var t;return(100*((null===(t=this.book.pagination.currentLocation)||void 0===t?void 0:t.end.percentage)||0)).toFixed()}},methods:{changePage:function(){var input=prompt("Please enter page number"),t=parseInt(input);isNaN(t)?alert("Wrong input: ".concat(input)):this.$emit("change",this.book.pagination.pages[t-1])}}}),f=(n(590),n(86)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{staticClass:"bottom-bar",attrs:{variant:"light",fixed:"bottom"}},[n("b-navbar-nav",[n("b-nav-item",{on:{click:t.changePage}},[n("small",[n("b",[t._v(t._s(t.percentage))]),t._v("%\n      ")])])],1),t._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[t.leftPagesOfTheChapter>0?n("b-nav-item",{attrs:{right:""}},[n("small",[t._v(t._s(t.leftPagesOfTheChapter)+" pages left in this chapter")])]):n("b-nav-item",{attrs:{right:""}},[n("small",[t._v("last page of this chapter")])])],1)],1)}),[],!1,null,"81584fce",null);e.default=component.exports},608:function(t,e,n){"use strict";n.r(e);n(21),n(20),n(17),n(13),n(23),n(18),n(24);var r=n(52),o=n(3),c=(n(109),n(25)),l=n(150),d=n(142),f=n(65),v=n(155),h=n(593),m=n.n(h),x=n(578);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function M(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y=c.default.extend({components:{BModal:d.a,BButton:f.a,BSpinner:v.a},data:function(){return{element:void 0,word:"",translation:void 0}},computed:{phonetic:function(){var t,e,n;return(null===(e=null===(t=this.translation)||void 0===t?void 0:t.phonetics)||void 0===e?void 0:e.length)>0?null===(n=this.translation)||void 0===n?void 0:n.phonetics[0]:void 0}},methods:M(M({},Object(l.b)({review:"user-word/review"})),{},{open:function(element){this.element=element,this.word=element.textContent.toLowerCase(),this.$bvModal.show("word-modal"),this.fetchTranslation()},fetchTranslation:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.translation=void 0,e.next=3,m.a.lookup(t.word);case 3:n=e.sent,r=n.records,t.translation=r[0];case 6:case"end":return e.stop()}}),e)})))()},playAudio:function(){var t;(null===(t=this.phonetic)||void 0===t?void 0:t.audio)&&new Audio(this.phonetic.audio).play()},setWordStatus:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.review({status:t,word:e.word});case 2:r=n.sent,x.a.updateWordStatus(e.element,r),e.$bvModal.hide("word-modal");case 5:case"end":return n.stop()}}),n)})))()}})}),j=(n(594),n(86)),component=Object(j.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:"word-modal","hide-backdrop":"","hide-footer":"","hide-header":""}},[r("h2",{staticClass:"modal-title"},[t._v("\n    "+t._s(t.word)+"\n    "),t.phonetic?r("small",{staticClass:"phonetic",on:{click:t.playAudio}},[t._v("\n      "+t._s(t.phonetic.text)+"\n      "),t.phonetic.audio?r("img",{staticClass:"icon faded",attrs:{src:n(592),alt:""}}):t._e()]):t._e()]),t._v(" "),r("hr"),t._v(" "),t.translation?r("p",{staticClass:"my-4 translation"},[r("ul",t._l(t.translation.meanings,(function(e,n){return r("li",{key:n},[r("b",[t._v(t._s(e.partOfSpeech))]),t._v(" "),r("ol",t._l(e.definitions,(function(e,n){return r("li",{key:n},[t._v("\n            "+t._s(e.definition)+"\n          ")])})),0),t._v(" "),r("br")])})),0)]):r("center",[r("br"),t._v(" "),r("br"),t._v(" "),r("b-spinner",{attrs:{small:""}}),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("br")],1),t._v(" "),r("hr"),t._v(" "),r("b-button",{attrs:{block:"",variant:"success"},on:{click:function(e){return t.setWordStatus("LEARNING")}}},[t._v("Needs more review")]),t._v(" "),r("b-button",{attrs:{block:"",variant:"dark"},on:{click:function(e){return t.setWordStatus("KNOWN")}}},[t._v("Move to the known ones")])],1)}),[],!1,null,null,null);e.default=component.exports},615:function(t,e,n){"use strict";n(600)},616:function(t,e,n){var r=n(116)(!1);r.push([t.i,".reader[data-v-56da3f04]{top:0;left:0;width:100%;height:100%;margin-top:56px;margin-bottom:56px;font-family:Helvetica,sans-serif;position:fixed}.reader .epub-viewer[data-v-56da3f04]{position:fixed;width:100%;height:calc(100% - 112px)}",""]),t.exports=r},628:function(t,e,n){"use strict";n.r(e);var r,o=n(52),c=(n(109),n(25)),l=n(215),d=n(578),f=c.default.extend({layout:"reader",asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,c,f,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.query,o=t.error,c=t.store,f=n.id,e.next=4,l.library.get(f);case 4:if(!(v=e.sent)){e.next=19;break}return e.prev=6,e.next=9,c.dispatch("user-word/getUserWords");case 9:return r=new d.a(v,c.state["user-word"].userWords),window.viewer=r,e.abrupt("return",{info:v.info});case 14:e.prev=14,e.t0=e.catch(6);case 17:e.next=20;break;case 19:o({statusCode:404,message:"".concat(f," not found!")});case 20:case"end":return e.stop()}}),e,null,[[6,14]])})))()},data:function(){return{showControlls:!1,loading:!0,initialised:!1}},computed:{viewer:function(){return r}},created:function(){var t=this;r.on("click-tap",(function(){return t.showControlls=!t.showControlls})),r.on("word-click",(function(element){t.$refs.wordModal.open(element)}))},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.initialize();case 2:return t.initialised=!0,e.next=5,t.$nextTick();case 5:return e.next=7,r.display(t.$refs.viewer);case 7:t.loading=!1;case 8:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){r.destroy()},methods:{changeFontSize:function(t){r.fontSize=t}}}),v=(n(615),n(86)),component=Object(v.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"reader"},[t.loading?n("ReaderLoading",{attrs:{book:t.info}}):t._e(),t._v(" "),t.initialised?n("div",[n("ReaderChapterBar",{attrs:{chapter:t.info.pagination.currentChapter}}),t._v(" "),n("ReaderTopBar",{directives:[{name:"show",rawName:"v-show",value:t.showControlls,expression:"showControlls"}],attrs:{title:t.info.title},on:{"font-size-changed":t.changeFontSize}}),t._v(" "),n("div",{ref:"viewer",staticClass:"epub-viewer"}),t._v(" "),n("ReaderBottomBar",{ref:"btnBar",attrs:{book:t.info},on:{change:function(e){return t.viewer.goTo(e)}}})],1):t._e(),t._v(" "),n("ReaderWordModal",{ref:"wordModal"})],1)}),[],!1,null,"56da3f04",null);e.default=component.exports;installComponents(component,{ReaderLoading:n(604).default,ReaderChapterBar:n(605).default,ReaderTopBar:n(606).default,ReaderBottomBar:n(607).default,ReaderWordModal:n(608).default})}}]);